<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>ShadowStock 影子证券 - 设置</title>
    <link href="content/bootstrap.css" rel="stylesheet" />
    <link href="content/bootstrap-theme.css" rel="stylesheet" />
    <link href="content/site.css" rel="stylesheet" />
</head>
<body>
    <div class="container-fluid container-settings">
        <div class="row">
            <div class="col-xs-12">
                <div class="form-group">
                    <label for="refreshInterval">刷新间隔（秒）</label>
                    <select id="refreshInterval" class="form-control input-sm">
                        <option value="3000">3</option>
                        <option value="5000">5</option>
                        <option value="8000">8</option>
                        <option value="10000">10</option>
                        <option value="30000">30</option>
                        <option value="60000">60</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-5">
                <div class="form-group">
                    <label for="displayColumns" class="text-danger">已选栏位</label>
                    <select id="displayColumns" class="form-control input-sm" multiple>
                        <option>名称</option>
                        <option>今开</option>
                        <option>昨收</option>
                        <option>最新价</option>
                    </select>
                </div>
            </div>
            <div class="col-xs-2 col-toolbar-vertical">
                <div class="btn-group-vertical show-grid">
                    <button type="button" class="btn btn-sm btn-success" data-action="addColumn">＜ 添加</button>
                    <button type="button" class="btn btn-sm btn-success" data-action="removeColumn">删除 ＞</button>
                </div>
                <div class="clearfix"></div>
                <div class="btn-group-vertical">
                    <button type="button" class="btn btn-sm btn-default" data-action="moveColumnUp">∧ 上移</button>
                    <button type="button" class="btn btn-sm btn-default" data-action="moveColumnDown">∨ 下移</button>
                </div>
            </div>
            <div class="col-xs-5">
                <div class="form-group">
                    <label for="availableColumns">可用栏位</label>
                    <select id="availableColumns" class="form-control input-sm" multiple>
                        <option>名称</option>
                        <option>今开</option>
                        <option>昨收</option>
                        <option>最新价</option>
                        <option>名称</option>
                        <option>今开</option>
                        <option>昨收</option>
                        <option>最新价</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <button type="button" class="btn btn-sm btn-danger" data-action="save">保存</button>
                <button type="button" class="btn btn-sm btn-default" data-action="cancel">取消</button>
            </div>
        </div>
    </div>

    <script src="scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        $(function () {
            // 初始化
            //var args = JSON.parse(unescape(window.location.href.substr(window.location.href.indexOf('?') + 1)));
            var args = {
                refreshInterval: 8000,
                displayColumns: [
                    { id: 50, name: '操作' },
                    { id: 40, name: 'aa' },
                    { id: 41, name: 'BB' },
                    { id: 42, name: 'ccc' },
                ],
                availableColumns: [
                    { id: 40, name: 'aa' },
                    { id: 41, name: 'BB' },
                    { id: 42, name: 'ccc' },
                    { id: 53, name: 'aa' },
                    { id: 54, name: 'aa' },
                    { id: 55, name: 'aa' },
                ]
            };

            var refreshInterval = $('#refreshInterval').val(args.refreshInterval);
            var displayColumns = $('#displayColumns').empty();
            var displayColumnsLength = args.displayColumns.length;
            for (var i = 0; i < displayColumnsLength; i++) {
                $('<option>').val(args.displayColumns[i].id).text(args.displayColumns[i].name)
                    .appendTo(displayColumns);
            }
            var availableColumns = $('#availableColumns').empty();
            var availableColumnsLength = args.availableColumns.length;
            for (var i = 0; i < availableColumnsLength; i++) {
                $('<option>').val(args.availableColumns[i].id).text(args.availableColumns[i].name)
                    .appendTo(availableColumns);
            }

            $('[data-action]').click(function () {
                var action = $(this).data('action');
                switch (action) {
                    case 'addColumn':
                        availableColumns.children(':selected').appendTo(displayColumns);
                    case 'removeColumn':
                    case 'moveColumnUp':
                    case 'moveColumnDown':
                        break;

                    case 'save':
                    case 'cancel':
                    default:
                        //var callbackArgs = {
                        //    token: args.token,
                        //    result: $(this).data('action')
                        //};

                        //$('.form-control').each(function () {
                        //    var control = $(this);
                        //    callbackArgs[control.attr('id')] = control.val();
                        //});

                        //eval('window.parent.' + args.callback + '(callbackArgs)');
                        break;
                }
            });
        });
    </script>
</body>
</html>
