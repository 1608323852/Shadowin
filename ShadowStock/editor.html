<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>ShadowStock 影子证券 - 编辑器</title>
    <link href="content/bootstrap.css" rel="stylesheet" />
    <link href="content/bootstrap-theme.css" rel="stylesheet" />
    <link href="content/site.css" rel="stylesheet" />
</head>
<body>
    <div class="container-editor">
        <div class="input-group input-group-sm show-grid">
            <span class="input-group-addon">成本价</span>
            <input type="text" class="form-control" id="cost" placeholder="示例: 12.34">
        </div>
        <div class="input-group input-group-sm show-grid">
            <span class="input-group-addon">持有量</span>
            <input type="text" class="form-control" id="quantity" placeholder="示例: 1000">
        </div>
        <button type="button" class="btn btn-sm btn-danger" data-action="save">保存</button>
        <button type="button" class="btn btn-sm btn-default" data-action="cancel">取消</button>
    </div>

    <script src="scripts/jquery-1.10.2.js"></script>
    <script src="scripts/getUrlQueryString.js"></script>
    <script type="text/javascript">
        $(function () {
            var query = $.getUrlQueryString(window.location.href);
            $('#cost').val(isNaN(query.cost) ? '' : query.cost)
                .focus(function () {
                    $(this).select();
                });
            $('#quantity').val(isNaN(query.quantity) ? '' : query.quantity)
                .focus(function () {
                    $(this).select();
                });

            $('[data-action]').click(function () {
                var callbackArgs = {
                    token: query.token,
                    result: $(this).data('action')
                };

                $('.form-control').each(function () {
                    var control = $(this);
                    callbackArgs[control.attr('id')] = control.val();
                });

                eval('window.parent.' + query.callback + '(callbackArgs)');
            });
        });
    </script>
</body>
</html>
